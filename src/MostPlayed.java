package src;

import java.io.IOException;
import java.net.URI;
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;
import java.util.*;
import org.json.*;

public class MostPlayed {

	//Instance variable
	ArrayList<Game> games = new ArrayList<>();

	
	public MostPlayed() {
		String jsonData = "{\"response\":{\"last_update\":1708134798,\"ranks\":[{\"rank\":1,\"appid\":730,\"concurrent_in_game\":601106,\"peak_in_game\":1114321},{\"rank\":2,\"appid\":1623730,\"concurrent_in_game\":296588,\"peak_in_game\":499873},{\"rank\":3,\"appid\":570,\"concurrent_in_game\":286903,\"peak_in_game\":639031},{\"rank\":4,\"appid\":553850,\"concurrent_in_game\":234372,\"peak_in_game\":276364},{\"rank\":5,\"appid\":1172470,\"concurrent_in_game\":152930,\"peak_in_game\":442298},{\"rank\":6,\"appid\":578080,\"concurrent_in_game\":110466,\"peak_in_game\":487327},{\"rank\":7,\"appid\":1086940,\"concurrent_in_game\":109764,\"peak_in_game\":114990},{\"rank\":8,\"appid\":1938090,\"concurrent_in_game\":104396,\"peak_in_game\":111235},{\"rank\":9,\"appid\":271590,\"concurrent_in_game\":81408,\"peak_in_game\":163672},{\"rank\":10,\"appid\":252490,\"concurrent_in_game\":79711,\"peak_in_game\":128331},{\"rank\":11,\"appid\":440,\"concurrent_in_game\":71883,\"peak_in_game\":78914},{\"rank\":12,\"appid\":359550,\"concurrent_in_game\":69414,\"peak_in_game\":75256},{\"rank\":13,\"appid\":1966720,\"concurrent_in_game\":58288,\"peak_in_game\":97955},{\"rank\":14,\"appid\":230410,\"concurrent_in_game\":57054,\"peak_in_game\":64777},{\"rank\":15,\"appid\":236390,\"concurrent_in_game\":55607,\"peak_in_game\":97724},{\"rank\":16,\"appid\":431960,\"concurrent_in_game\":54036,\"peak_in_game\":115638},{\"rank\":17,\"appid\":304930,\"concurrent_in_game\":52777,\"peak_in_game\":60160},{\"rank\":18,\"appid\":881020,\"concurrent_in_game\":52591,\"peak_in_game\":106733},{\"rank\":19,\"appid\":1599340,\"concurrent_in_game\":47911,\"peak_in_game\":61895},{\"rank\":20,\"appid\":1203620,\"concurrent_in_game\":46087,\"peak_in_game\":68995},{\"rank\":21,\"appid\":1203220,\"concurrent_in_game\":45766,\"peak_in_game\":207895},{\"rank\":22,\"appid\":2252570,\"concurrent_in_game\":38762,\"peak_in_game\":73098},{\"rank\":23,\"appid\":1245620,\"concurrent_in_game\":37951,\"peak_in_game\":48849},{\"rank\":24,\"appid\":1085660,\"concurrent_in_game\":37424,\"peak_in_game\":37571},{\"rank\":25,\"appid\":289070,\"concurrent_in_game\":37100,\"peak_in_game\":50506},{\"rank\":26,\"appid\":582010,\"concurrent_in_game\":33904,\"peak_in_game\":75966},{\"rank\":27,\"appid\":1174180,\"concurrent_in_game\":33318,\"peak_in_game\":50951},{\"rank\":28,\"appid\":2195250,\"concurrent_in_game\":32531,\"peak_in_game\":58743},{\"rank\":29,\"appid\":221100,\"concurrent_in_game\":31861,\"peak_in_game\":51994},{\"rank\":30,\"appid\":2357570,\"concurrent_in_game\":31559,\"peak_in_game\":39110},{\"rank\":31,\"appid\":438100,\"concurrent_in_game\":31555,\"peak_in_game\":31555},{\"rank\":32,\"appid\":413150,\"concurrent_in_game\":31269,\"peak_in_game\":36941},{\"rank\":33,\"appid\":1222670,\"concurrent_in_game\":30043,\"peak_in_game\":37966},{\"rank\":34,\"appid\":381210,\"concurrent_in_game\":29334,\"peak_in_game\":37341},{\"rank\":35,\"appid\":1091500,\"concurrent_in_game\":29289,\"peak_in_game\":42842},{\"rank\":36,\"appid\":2321470,\"concurrent_in_game\":27553,\"peak_in_game\":31466},{\"rank\":37,\"appid\":394360,\"concurrent_in_game\":26899,\"peak_in_game\":45756},{\"rank\":38,\"appid\":39210,\"concurrent_in_game\":25811,\"peak_in_game\":25811},{\"rank\":39,\"appid\":1623660,\"concurrent_in_game\":25244,\"peak_in_game\":26593},{\"rank\":40,\"appid\":322170,\"concurrent_in_game\":25218,\"peak_in_game\":29746},{\"rank\":41,\"appid\":550,\"concurrent_in_game\":25043,\"peak_in_game\":30775},{\"rank\":42,\"appid\":252950,\"concurrent_in_game\":24798,\"peak_in_game\":37032},{\"rank\":43,\"appid\":2073850,\"concurrent_in_game\":24632,\"peak_in_game\":31005},{\"rank\":44,\"appid\":1449850,\"concurrent_in_game\":24617,\"peak_in_game\":35546},{\"rank\":45,\"appid\":108600,\"concurrent_in_game\":24102,\"peak_in_game\":26444},{\"rank\":46,\"appid\":105600,\"concurrent_in_game\":23977,\"peak_in_game\":31658},{\"rank\":47,\"appid\":1778820,\"concurrent_in_game\":23530,\"peak_in_game\":25662},{\"rank\":48,\"appid\":436150,\"concurrent_in_game\":22797,\"peak_in_game\":24296},{\"rank\":49,\"appid\":2161700,\"concurrent_in_game\":21839,\"peak_in_game\":24404},{\"rank\":50,\"appid\":489830,\"concurrent_in_game\":21616,\"peak_in_game\":25563},{\"rank\":51,\"appid\":1281930,\"concurrent_in_game\":21406,\"peak_in_game\":30139},{\"rank\":52,\"appid\":251570,\"concurrent_in_game\":20817,\"peak_in_game\":28534},{\"rank\":53,\"appid\":4000,\"concurrent_in_game\":20221,\"peak_in_game\":29848},{\"rank\":54,\"appid\":294100,\"concurrent_in_game\":18585,\"peak_in_game\":21057},{\"rank\":55,\"appid\":582660,\"concurrent_in_game\":18484,\"peak_in_game\":22500},{\"rank\":56,\"appid\":346110,\"concurrent_in_game\":18422,\"peak_in_game\":28219},{\"rank\":57,\"appid\":892970,\"concurrent_in_game\":18093,\"peak_in_game\":27350},{\"rank\":58,\"appid\":2399830,\"concurrent_in_game\":17698,\"peak_in_game\":19613},{\"rank\":59,\"appid\":899770,\"concurrent_in_game\":16965,\"peak_in_game\":21694},{\"rank\":60,\"appid\":238960,\"concurrent_in_game\":16854,\"peak_in_game\":22666},{\"rank\":61,\"appid\":386360,\"concurrent_in_game\":16682,\"peak_in_game\":16895},{\"rank\":62,\"appid\":250900,\"concurrent_in_game\":16555,\"peak_in_game\":23830},{\"rank\":63,\"appid\":2349820,\"concurrent_in_game\":16477,\"peak_in_game\":32216},{\"rank\":64,\"appid\":813780,\"concurrent_in_game\":16322,\"peak_in_game\":21649},{\"rank\":65,\"appid\":1142710,\"concurrent_in_game\":15756,\"peak_in_game\":22190},{\"rank\":66,\"appid\":8930,\"concurrent_in_game\":15419,\"peak_in_game\":19263},{\"rank\":67,\"appid\":377160,\"concurrent_in_game\":15281,\"peak_in_game\":17849},{\"rank\":68,\"appid\":291550,\"concurrent_in_game\":15230,\"peak_in_game\":17920},{\"rank\":69,\"appid\":1238810,\"concurrent_in_game\":14932,\"peak_in_game\":59168},{\"rank\":70,\"appid\":1248130,\"concurrent_in_game\":14636,\"peak_in_game\":36150},{\"rank\":71,\"appid\":227300,\"concurrent_in_game\":14091,\"peak_in_game\":42268},{\"rank\":72,\"appid\":322330,\"concurrent_in_game\":13939,\"peak_in_game\":40201},{\"rank\":73,\"appid\":1366800,\"concurrent_in_game\":13870,\"peak_in_game\":16646},{\"rank\":74,\"appid\":1158310,\"concurrent_in_game\":13697,\"peak_in_game\":18850},{\"rank\":75,\"appid\":261550,\"concurrent_in_game\":13645,\"peak_in_game\":24364},{\"rank\":76,\"appid\":1782210,\"concurrent_in_game\":13203,\"peak_in_game\":14609},{\"rank\":77,\"appid\":236850,\"concurrent_in_game\":12879,\"peak_in_game\":19659},{\"rank\":78,\"appid\":306130,\"concurrent_in_game\":12836,\"peak_in_game\":17029},{\"rank\":79,\"appid\":275850,\"concurrent_in_game\":12749,\"peak_in_game\":15047},{\"rank\":80,\"appid\":2072450,\"concurrent_in_game\":12733,\"peak_in_game\":17927},{\"rank\":81,\"appid\":739630,\"concurrent_in_game\":12731,\"peak_in_game\":21937},{\"rank\":82,\"appid\":218620,\"concurrent_in_game\":12633,\"peak_in_game\":34023},{\"rank\":83,\"appid\":284160,\"concurrent_in_game\":12551,\"peak_in_game\":18684},{\"rank\":84,\"appid\":629520,\"concurrent_in_game\":12314,\"peak_in_game\":18427},{\"rank\":85,\"appid\":960090,\"concurrent_in_game\":12281,\"peak_in_game\":13413},{\"rank\":86,\"appid\":427520,\"concurrent_in_game\":11986,\"peak_in_game\":16483},{\"rank\":87,\"appid\":1454400,\"concurrent_in_game\":11698,\"peak_in_game\":12875},{\"rank\":88,\"appid\":107410,\"concurrent_in_game\":11649,\"peak_in_game\":16425},{\"rank\":89,\"appid\":1063730,\"concurrent_in_game\":11633,\"peak_in_game\":14337},{\"rank\":90,\"appid\":281990,\"concurrent_in_game\":11139,\"peak_in_game\":12915},{\"rank\":91,\"appid\":594650,\"concurrent_in_game\":9953,\"peak_in_game\":20753},{\"rank\":92,\"appid\":686810,\"concurrent_in_game\":9909,\"peak_in_game\":12404},{\"rank\":93,\"appid\":1687950,\"concurrent_in_game\":9860,\"peak_in_game\":21035},{\"rank\":94,\"appid\":1517290,\"concurrent_in_game\":9735,\"peak_in_game\":17389},{\"rank\":95,\"appid\":548430,\"concurrent_in_game\":9604,\"peak_in_game\":13166},{\"rank\":96,\"appid\":990080,\"concurrent_in_game\":9579,\"peak_in_game\":15013},{\"rank\":97,\"appid\":513710,\"concurrent_in_game\":9372,\"peak_in_game\":19136},{\"rank\":98,\"appid\":632360,\"concurrent_in_game\":9364,\"peak_in_game\":9378},{\"rank\":99,\"appid\":292030,\"concurrent_in_game\":9247,\"peak_in_game\":19945},{\"rank\":100,\"appid\":1172620,\"concurrent_in_game\":9187,\"peak_in_game\":16104}]}}";

		JSONObject jSONResponse = new JSONObject(jsonData);

		JSONArray list = jSONResponse.getJSONObject("response").getJSONArray("ranks");
		
		//Storing most played
		for(int i = 0; i < list.length(); i++) 
		{
			games.add(new Game(list.getJSONObject(i).optString("appid")));
		}
	}

	public Game getGame(int i) {
		return games.get(i);
	}

	
	public int getSize() {
		return games.size();
	}
	
	
	@Override
	public String toString() {
		return games.toString();
	}

}
